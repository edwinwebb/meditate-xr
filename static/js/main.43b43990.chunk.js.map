{"version":3,"sources":["Controls/Controls.js","Sky/Sky.js","Moon/Moon.js","Moon/MoonModel.js","Platfrom/Yinyang.js","Platfrom/Platform.js","App.js","index.js"],"names":["Controls","props","useState","skySqueeze","setSkySqueeze","moonSqueeze","setMoonSqueeze","useXR","isPresenting","player","moonTargetRef","useRef","callbacks","setInclination","setMoonPosition","setMoonScale","rightController","useController","leftController","raycaster","Raycaster","tempMatrix","Matrix4","useXREvent","e","handedness","useEffect","children","position","set","useXRFrame","controller","y","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","intersectObject","current","point","toArray","distanceTo","PointerLockControls","args","ref","visible","side","DoubleSide","SkyGroup","skyMesh","inclination","minMaxInclination","Math","min","max","Sky","sunPosition","distance","Model","group","useGLTF","nodes","materials","dispose","geometry","Cube008","material","scale","material-transparent","material-opacity","material-blending","AdditiveBlending","MoonModel","radius","moonGroupRef","x","z","fallback","preload","process","useTexture","blkCol","blkRough","blkNormal","wytCol","wytRough","wytNormal","CubeCamera","resolution","frames","Infinity","near","far","cubeTex","yang","envMap","map","roughnessMap","normalMap","yin","Platform","App","moonPosition","moonScale","camera","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.43b43990.chunk.js","sourcesContent":["import { Sphere, PointerLockControls } from '@react-three/drei'\nimport { useXREvent, useXRFrame, useXR, useController } from '@react-three/xr';\nimport { useState, useRef, useEffect } from 'react'\nimport { Raycaster, Matrix4, DoubleSide } from 'three'\n\nexport default function Controls(props) {\n    const [skySqueeze, setSkySqueeze] = useState(false)\n    const [moonSqueeze, setMoonSqueeze] = useState(false)\n    const { isPresenting, player } = useXR()\n    const moonTargetRef = useRef()\n    const { setInclination, setMoonPosition, setMoonScale } = props.callbacks\n    const rightController = useController('right')\n    const leftController = useController('left')\n    const raycaster = new Raycaster()\n    const tempMatrix = new Matrix4()\n    \n    useXREvent('squeezestart', (e) => setSkySqueeze(true), {handedness: 'right'})\n    useXREvent('squeezeend', (e) => setSkySqueeze(false), {handedness: 'right'})\n    useXREvent('squeezestart', (e) => setMoonSqueeze(true), {handedness: 'left'})\n    useXREvent('squeezeend', (e) => setMoonSqueeze(false), {handedness: 'left'})\n\n    useEffect(()=>{\n        player.children[0].position.set(0,1,0)\n    })\n\n    useXRFrame( () => {\n        if(skySqueeze && isPresenting)  {\n            setInclination((rightController.controller.position.y / 2) - 0.5) // not the right way\n        }\n        if(moonSqueeze && isPresenting) {\n            tempMatrix.identity().extractRotation(leftController.controller.matrixWorld)\n            raycaster.ray.origin.setFromMatrixPosition(leftController.controller.matrixWorld)\n            raycaster.ray.direction.set(0, 0, -1).applyMatrix4(tempMatrix)\n            setMoonPosition(raycaster.intersectObject(moonTargetRef.current)[0].point.toArray())\n            setMoonScale(player.children[0].position.distanceTo(leftController.controller.position))\n        }\n    })\n\n    return(<group>\n        <PointerLockControls />\n        <Sphere args={[380,32,32]} position={[0,0,0]} ref={moonTargetRef} visible={false}>\n            <meshBasicMaterial side={DoubleSide}/>\n        </Sphere>\n    </group>)\n}","import { Sky } from '@react-three/drei'\nimport { useRef } from 'react'\n\nfunction SkyGroup(props) {\n  const skyMesh = useRef()\n  const { inclination = 0.2 } = props\n  const minMaxInclination = Math.min(Math.max(inclination, -0.4), 1)\n\n  return(<group>\n    <directionalLight args={[0xfdfbd3, 0.7]} position={[10000,minMaxInclination*1000,0]} />\n    <Sky ref={ skyMesh } sunPosition={[1,minMaxInclination,0]} distance={150000} />\n  </group>)\n}\n\nexport default SkyGroup","/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\n*/\n\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei'\nimport { AdditiveBlending } from 'three'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/moon.glb')\n  return (\n    <group ref={group} {...props} dispose={null}>\n      <mesh \n        geometry={nodes.Cube008.geometry} \n        material={materials['Default OBJ.005']} \n        scale={[0.003, 0.003, 0.003]} \n        material-transparent={true} \n        material-opacity={0.98} \n        material-blending={AdditiveBlending}\n        />\n    </group>\n  )\n}\n\nuseGLTF.preload(process.env.PUBLIC_URL + '/moon.glb')\n","import React, { Suspense, useRef } from 'react'\nimport { Sphere } from '@react-three/drei'\nimport Moon from './Moon'\nimport { useXRFrame } from '@react-three/xr';\n\nexport default function MoonModel(props) {\n  const {\n      radius = 1.737,\n      position = [0,100,380],\n      scale = 1\n  } = props;\n  const moonGroupRef = useRef()\n\n  useXRFrame(()=>{\n    moonGroupRef.current.position.x = position[0]\n    moonGroupRef.current.position.y = position[1]\n    moonGroupRef.current.position.z = position[2]\n    moonGroupRef.current.scale.set((1-scale)*10,(1-scale)*10,(1-scale)*10)\n  })\n\n  return (\n      <group position={[0,100,-380]} ref={moonGroupRef}>\n        <Suspense fallback={<Sphere args={[radius, 32, 32]} scale={[1,1,1]}/>}>\n            <Moon scale={[10,10,10]} />\n        </Suspense>\n    </group>\n  )\n}\n\n","import React, { useRef } from 'react'\nimport { CubeCamera, useGLTF } from '@react-three/drei'\nimport { useTexture } from '@react-three/drei'\nimport { DoubleSide } from 'three'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes } = useGLTF('/yinyang.glb')\n  const [blkCol, blkRough, blkNormal, wytCol, wytRough, wytNormal] = useTexture([\n    process.env.PUBLIC_URL + 'Marble006_1K_Color.jpg',\n    process.env.PUBLIC_URL + 'Marble006_1K_Roughness.jpg',\n    process.env.PUBLIC_URL + 'Marble006_1K_Normal.jpg',\n    process.env.PUBLIC_URL + 'Marble012_1K_Color.jpg',\n    process.env.PUBLIC_URL + 'Marble012_1K_Roughness.jpg',\n    process.env.PUBLIC_URL + 'Marble012_1K_Normal.jpg'\n])\n\n  return (\n    <group ref={group} {...props} dispose={null} scale={[6,6,6]}>\n      <CubeCamera\n        resolution={512}\n        frames={Infinity}\n        near={0.1}\n        far={50000}\n        >\n          {(cubeTex) => (\n            <>\n              <mesh\n                geometry={nodes.yang.geometry}\n              >\n                <meshStandardMaterial\n                  envMap={ cubeTex }\n                  map={blkCol}\n                  roughnessMap={blkRough}\n                  normalMap={blkNormal}\n                  side={ DoubleSide }\n                />\n              </mesh>\n              <mesh\n                geometry={nodes.yin.geometry}\n              >\n                <meshStandardMaterial\n                  envMap={ cubeTex }\n                  map={wytCol}\n                  roughnessMap={wytRough}\n                  normalMap={wytNormal}\n                  side={ DoubleSide }\n                />\n              </mesh>\n          </>\n        )}\n      </CubeCamera>\n    </group>\n  )\n}\n\nuseGLTF.preload(process.env.PUBLIC_URL + '/yinyang.glb')\n\n","import { Suspense } from 'react'\nimport { Cylinder } from '@react-three/drei'\nimport Yinyang from './Yinyang'\n\nexport default function Platform(props) {\n    return( <Suspense fallback={<Cylinder args={[1, 1, 32, 32]} scale={[1,0.01,1]} />}>\n        <Yinyang scale={[0.1,0.1,0.1]} />\n    </Suspense>)\n}","import { useState } from 'react'\nimport { VRCanvas, Hands } from '@react-three/xr'\nimport Controls from './Controls/Controls'\nimport Sun from './Sky/Sky'\nimport Moon from './Moon/MoonModel'\nimport Platform from './Platfrom/Platform'\n\nfunction App() {\n  const [inclination, setInclination] = useState(0.2)\n  const [moonPosition, setMoonPosition] = useState([0,0,-380])\n  const [moonScale, setMoonScale] = useState(1)\n\n  return (\n    <VRCanvas camera={[{far: 150000}]}>\n      <Sun inclination={inclination} />\n      <Moon radius={1.737} position={moonPosition} scale={moonScale} />\n      <Platform />\n      <Controls callbacks={{setInclination, setMoonPosition, setMoonScale}} />\n      <hemisphereLight args={[0x575c60, 0x252430, 1]} />\n      <Hands />\n    </VRCanvas>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}